"0","beta = 2 # baseline standard deviation"
"0","phi = 0.95 # AR parameter"
"0","sigma = 0.5 # variability of the AR process"
"0",""
"0","n = 1000"
"0","set.seed(123)"
"0","g = y = rep(NA, n)"
"0","g[1] = rnorm(1, 0, sigma / sqrt(1-phi^2)) # stationary distribution of AR process"
"0","y[1] = stats::rnorm(1, 0, beta*exp(g[1]/2)) "
"0","# conditional distribution of y_1 given underlying volatility"
"0","for(t in 2:n){"
"0","  g[t] = rnorm(1, phi*g[t-1] , sigma) # transition density"
"0","  y[t] = stats::rnorm(1, 0, beta*exp(g[t]/2)) "
"0","  # conditional distribution of y_t given underlying volatility"
"0","}"
"0",""
"0","# share returns"
"0","par(mar = c(5,4,3,4.5)+0.1)"
"0","plot(y, type = ""l"", bty = ""n"", ylim = c(-40,20), yaxt = ""n"")"
